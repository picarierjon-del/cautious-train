<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Gestionale Pizzeria – SmartApp</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
<style>
/* === Base === */
body {
  margin:0;
  font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Helvetica,Arial,sans-serif;
  background:#f4f4f9;
  color:#333;
  padding-bottom:60px; /* spazio per la tabbar */
}
h1,h2,h3{margin:0 0 .5em}
h2{color:#e31b23;border-bottom:2px solid #e31b23;padding-bottom:4px}
button{cursor:pointer}

/* === Sezioni principali === */
.page{padding:16px}
.page.hidden{display:none}

/* === Inserimento ordine (smart grid) === */
.category-menu{display:flex;gap:6px;margin-bottom:10px}
.category-menu button{
  flex:1; background:#555; color:#fff; border:none;
  padding:8px; border-radius:6px; font-size:14px;
}
.category-menu button.active{background:#e31b23}
#products-list{
  display:grid; gap:8px;
  grid-template-columns:repeat(auto-fit,minmax(100px,1fr));
}
.product-item{
  background:#fff; border:1px solid #ddd; border-radius:8px;
  text-align:center; padding:10px 5px; font-size:.9em;
  box-shadow:0 1px 3px rgba(0,0,0,.05);
}
.product-item:hover{background:#ffe8e8}
#current-order{
  background:#fff; border:1px solid #ddd; border-radius:8px;
  padding:12px; margin-top:12px;
}
#order-items-list{list-style:none;margin:0;padding:0}
#order-items-list li{
  display:flex; justify-content:space-between;
  border-bottom:1px dotted #eee; padding:4px 0; font-size:.9em;
}
.remove-item-btn{background:none;border:none;color:#e31b23;font-size:1.1em}

/* === Dettaglio Ordine === */
.delivery-modes{display:flex;gap:6px;margin:10px 0}
.delivery-modes button{
  flex:1; padding:8px; border:none;
  background:#ccc; border-radius:6px;
}
.delivery-modes button.active{background:#e31b23;color:#fff}
.mode-fields{display:none;margin-bottom:12px}
.mode-fields.active{display:block}
.mode-fields input{width:100%;padding:8px;margin:4px 0;border:1px solid #ccc;border-radius:6px}

/* === Lista ordini attivi === */
#active-orders .order-card{
  background:#fff; border:1px solid #ddd; border-radius:8px;
  padding:12px; margin-bottom:10px;
  box-shadow:0 1px 3px rgba(0,0,0,.05);
}
.order-card h4{margin-top:0;color:#e31b23}

/* === Barra di navigazione inferiore === */
.tabbar{
  position:fixed;left:0;right:0;bottom:0;
  display:flex;justify-content:space-around;
  background:#fff;border-top:1px solid #ccc;height:56px;z-index:100;
}
.tabbar button{
  flex:1;background:none;border:none;color:#888;
  display:flex;flex-direction:column;align-items:center;
  font-size:12px;padding:6px 0;
}
.tabbar button i{font-size:18px;margin-bottom:2px}
.tabbar button.active{color:#e31b23}
</style>
</head>
<body>

<header style="background:#e31b23;color:#fff;padding:12px;text-align:center">
  <h1>Gestionale Pizzeria</h1>
</header>

<main>
  <!-- === INSERIMENTO ORDINE === -->
  <section id="order-entry" class="page">
    <h2>Crea Ordine</h2>
    <div class="category-menu">
      <button class="menu-btn active" data-cat="pizze">Pizze</button>
      <button class="menu-btn" data-cat="bibite">Bibite</button>
      <button class="menu-btn" data-cat="aggiunte">Aggiunte</button>
    </div>
    <div id="products-list"></div>

    <div id="current-order">
      <h3>Ordine Corrente</h3>
      <ul id="order-items-list"></ul>
      <div id="total-price"><strong>Totale: €0.00</strong></div>
      <button id="finalize-order-btn" style="width:100%;margin-top:8px;background:#e31b23;color:#fff;border:none;padding:10px;border-radius:6px">
        Prosegui
      </button>
    </div>
  </section>

  <!-- === DETTAGLIO ORDINE === -->
  <section id="order-detail" class="page hidden">
    <h2>Dettaglio Ordine</h2>

    <div class="delivery-modes">
      <button class="mode-btn" data-mode="consegna">Consegna</button>
      <button class="mode-btn" data-mode="asporto">Asporto</button>
      <button class="mode-btn" data-mode="banco">Banco</button>
    </div>

    <form id="detail-form">
      <div class="mode-fields" data-for="consegna">
        <input type="text" placeholder="Nome e Cognome">
        <input type="text" placeholder="Indirizzo">
        <input type="tel"  placeholder="Telefono">
      </div>

      <div class="mode-fields" data-for="asporto">
        <input type="text" placeholder="Nome e Cognome">
        <input type="tel"  placeholder="Telefono">
        <label>Ora ritiro <input type="time"></label>
      </div>

      <div class="mode-fields" data-for="banco">
        <input type="text" placeholder="Cognome">
        <label>Ora <input type="time"></label>
      </div>

      <button type="submit" style="width:100%;background:#e31b23;color:#fff;border:none;padding:10px;border-radius:6px">
        Conferma Ordine
      </button>
    </form>
  </section>

  <!-- === LISTA ORDINI ATTIVI === -->
  <section id="orders-list" class="page hidden">
    <h2>Ordini Attivi</h2>
    <div id="active-orders">
      <!-- schede ordini verranno inserite qui nella fase successiva -->
    </div>
  </section>
</main>

<!-- === NAV BAR === -->
<nav class="tabbar">
  <button class="tab active" data-page="order-entry">
    <i class="fas fa-cash-register"></i><span>Inserimento</span>
  </button>
  <button class="tab" data-page="orders-list">
    <i class="fas fa-list-alt"></i><span>Ordini</span>
  </button>
  <button class="tab" data-page="order-detail">
    <i class="fas fa-user"></i><span>Dettagli</span>
  </button>
</nav>

<script>
// ------- Navigazione tra le pagine ---------
document.querySelectorAll('.tabbar .tab').forEach(btn=>{
  btn.addEventListener('click',()=>{
    document.querySelectorAll('.tabbar .tab').forEach(b=>b.classList.remove('active'));
    btn.classList.add('active');
    const page = btn.dataset.page;
    document.querySelectorAll('main .page').forEach(sec=>{
      sec.classList.toggle('hidden', sec.id!==page);
    });
  });
});

// ------- Selezione modalità consegna ---------
document.querySelectorAll('.delivery-modes .mode-btn').forEach(b=>{
  b.addEventListener('click',()=>{
    document.querySelectorAll('.delivery-modes .mode-btn').forEach(x=>x.classList.remove('active'));
    b.classList.add('active');
    const mode = b.dataset.mode;
    document.querySelectorAll('.mode-fields').forEach(f=>{
      f.classList.toggle('active', f.dataset.for===mode);
    });
  });
});

// ------- Menu demo per la griglia ---------
const menu = {
  pizze:[
    {nome:"Margherita", prezzo:5},
    {nome:"Diavola", prezzo:7.5}
  ],
  bibite:[
    {nome:"Acqua", prezzo:1},
    {nome:"Coca-Cola", prezzo:2.5}
  ],
  aggiunte:[
    {nome:"Mozzarella extra", prezzo:1},
    {nome:"Funghi", prezzo:1.2}
  ]
};
let currentCat = 'pizze';
function renderProducts(cat){
  currentCat = cat;
  const list = document.getElementById('products-list');
  list.innerHTML='';
  menu[cat].forEach(item=>{
    const d=document.createElement('div');
    d.className='product-item';
    d.innerHTML=`<strong>${item.nome}</strong><p>€${item.prezzo.toFixed(2)}</p>`;
    list.appendChild(d);
  });
}
document.querySelectorAll('.menu-btn').forEach(b=>{
  b.addEventListener('click',()=>{
    document.querySelectorAll('.menu-btn').forEach(x=>x.classList.remove('active'));
    b.classList.add('active');
    renderProducts(b.dataset.cat);
  });
});
renderProducts('pizze');
</script>
</body>
</html>
